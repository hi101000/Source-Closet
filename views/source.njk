<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Source Closet - {{ source.TITLE }}</title>
            <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Winky+Sans:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
        <link rel="stylesheet" href="/static/styles/styles.css">
        <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
        <script src="https://unpkg.com/pdfobject"></script>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    </head>
    <body id="source_page">
            <script src="https://cdn.jsdelivr.net/npm/motion@latest/dist/motion.js"></script>
            <script>
                const { animate, scroll } = Motion
            </script>
        <div class="topnav">
        <a href="/">Home</a>
        <a href="/sources_abbr">Source Abbreviations</a>
        <a href="/search">Search</a>
        <a href="/browse">Browse</a>
        <a href="/further_reading">Further Reading</a>
        <a href="/about">About</a>
        {% if not login %}
            <a href="/signup">Sign Up</a>
            <a href="/login">Log In</a>
        {% else %}
            <a href="/logout">Log Out</a>
            <a href="/profile">Profile</a>
        {% endif %}
        </div>

        <div class="sidebar">
            <h2 class="src_link" style="text-align: center;">Other Helpful Sources and Further Reading</h2>
            <p class="src_link">
                {% for furt in source.FURTHER_READING %}
                    <a id="sidebar-a" href="{{ furt.URL }}">{{ furt.NAME }}</a>
                    <br>
                    <br>
                {% endfor %}
            </p>
        </div>
        <div id="main_content">
        <h1 id="title">{{ source.TITLE }}</h1>
        </div>
        <div id="main">
            <div id="content" style="height: 1000px">
                {% if prot %}
                    <script type="text/javascript">
                        alert('Due to copyright concerns, I am required to put a transcript of the document here rather than a photo/facsimile. If you live in the United Kingdom, please contact your MP to ask them to amend the copyright law to make all public records in TNA part of the public domain, or at least freely usable for non-commercial purposes.');
                    </script>
                {% endif %}
                <iframe id="content" src="https://drive.google.com/file/d/{{ source.PATH }}/preview" width="650" height="900" allow="autoplay"></iframe>
            </div>
            <div id="metadata" style="overflow: auto; width: 100%; height: 200%; color: rgb(190, 147, 112);">
                {% if source.ID > 1 %}
                    <a href="/source/{{ source.ID-1 }}"><button id="prev" class="adj-source-btn">Previous Source</button></a>
                {% endif %}
                {% if source.ID < max_id %}
                    <a href="/source/{{ source.ID+1 }}"><button id="next" class="adj-source-btn">Next Source</button></a>
                {% endif %}
                <script>
                    function saveSource(){
                        window.location.href = "/save_source/{{ source.ID }}";
                    }
                </script>
                <style>
                    #save{
                        font-size: 30px;
                        border-radius: 20px;
                        background-color: rgb(93, 9, 183);
                        padding-left: 20px;
                        padding-right: 20px;
                        font-family: "Winky Sans", ui-rounded;
                        color: rgb(218, 139, 74);
                    }
                </style>
                {% if login %}
                    <br><br>
                    <button id="save" onclick="saveSource()">Save Source</button>
                {% endif %}
                <p>
                    <span class="highlighted">Author:</span> {{ source.AUTHOR }}<br><br>
                    <span class="highlighted">Date:</span> {{ source.DATE }}/{{ source.MONTH }}/{{ source.YEAR }}<br><br>
                    <span class="highlighted">Countries:</span> {{ source.COUNTRIES }}<br><br>
                    <span class="highlighted">Topics:</span> {{ source.TAGS }}<br><br>
                    <span class="highlighted">Description:</span> {{ source.DESCRIPTION }}<br><br>
                    <span class="highlighted">Source:</span> {{ source.CITATION }}<br><br>
                    {% if source.LINK != None %}
                        <span class="highlighted">Link</span>:
                            <br>
                            <br>
                            <a href="{{ source.LINK }}" target="_blank" style="color: rgb(107, 104, 255);">{{ source.LINK }}</a>
                    {% endif %}
                    <br>
                    <br>
                    <span class="highlighted">Source ID:</span> {{ source.ID }}
                    <br><br>
                    {% if source.TRANS != None %}
                        <span class="highlighted">English Translation:</span> <a href="{{ source.TRANS }}" style="color: rgb(107, 104, 255);" target="_blank">{{ source[11] }}</a>
                    {% endif %}
                    {% if source.ATTR != None %}
                        <br><br>
                        <span class="highlighted">Attribution:</span> {{ source.ATTR }}<br><br>
                        <span class="highlighted">License:</span> <a href="{{ source.LICENSE_LINK }}" style="color: rgb(107, 104, 255);" target="_blank">{{ source.LICENSE }}</a>
                    {% endif %}
                </p>
            </div>
            <br>
            <br>
            <br>
            </div>
        </div>
        <script>
    animate("#src_frame", {
            delay: 0.5,
            duration: 1,
            opacity: [0, 1],
            translateY: [-50, 0]
        });

        let prev = document.getElementById("prev");
let next = document.getElementById("next");

if(prev){
    prev.addEventListener('mouseenter', ()=>{
        prev.style.cursor = 'pointer';
    });
    prev.addEventListener('mouseleave', ()=>{
        prev.style.cursor = 'default';
    });
}

if(next){
    next.addEventListener('mouseenter', ()=>{
        next.style.cursor = 'pointer';
    });
    next.addEventListener('mouseleave', ()=>{
        next.style.cursor = 'default';
    });
}
</script>
    <script>
      window.va = window.va || function () { (window.vaq = window.vaq || []).push(arguments); };
    </script>
    <script defer src="/_vercel/insights/script.js"></script>
    </body>
</html>
